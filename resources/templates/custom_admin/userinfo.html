{% extends "base.html" %}

{% block page %}
{% load static %}

<script type="text/javascript" src="/resources/javascripts/jscharts.js"></script>
<section class="section section-alt section-padded">
    <div class="container-fluid">
        <div class="section-header">
            <h2>{{ student.username }}</h2>
        </div>
		{% if not user_sessions %}<h3>Студенту не хватило мотивации ни на один рк:(</h3>{% endif %}
		{% for session_output in user_sessions %}
			{% if session_output.session.attempt == 1 %}<div class="rk-view" id="RK{{ session_output.session.rk.id }}"><h3>{{ session_output.session.rk.title }}</h3>{% endif %}
				<h4 id= "{{ session_output.session.rk.title }} {{ session_output.session.attempt }}"> Попытка № {{ session_output.session.attempt }}</h4>
				<h5> Правильно......{{ session_output.questions_right_count }}/{{ session_output.questions_all_count }}</h5>
				<table class="users table table-bordered">
                	<thead>
                    	<tr>
							<th style="width:150px">#</th>
	                        <th>Запрос</th>
    	                    <th>Результат</th>
        	            </tr>
            	    </thead>
                	<tbody>
        			{% for session_question in session_output.session_questions %}		
						<tr style="background-color:#fff">
							<td>Вопрос</td>
							<td colspan="2">{{ session_question.question.description }}</td>
						</tr>
    	                <tr class="info">
							<td>Преподаватель</td>
							<td>{{ session_question.question.answer }}</td> 
            				<td class="answer">{{ session_question.get_right_records }} </td>
						</tr>
	                    <tr class="warning">
							<td>Студент</td>
        	    			<td>{{ session_question.last_answer }} </td>
							<td class="answer">{{ session_question.get_user_records }} </td>	
						</tr>
							<tr class={% if session_question.is_right %}"success">
							<td colspan=3><h4 style="text-align:center">Совпадение</h4></td>
							{% elif session_question.get_user_records %}"error">
							<td colspan=3><h4 style="text-align:center">Расхождение</h4></td>
							{% else %}>
							<td colspan=3><h4 style="text-align:center">Нет ответа</h4></td>
							{% endif %}
                	{% endfor %}
					</tbody>
	            </table>
			{% if not session_output == user_sessions.first and session_output.session.attempt == 1 or session_output == user_sessions.last %}</div>{% endif %}
		{% endfor %}
    </div>
<ul class="rk-headers">
{% for session_output in user_sessions %}
    {% if session_output.session.attempt == 1 %}<li name="#RK{{session_output.session.rk.id}}"><a>{{ session_output.session.rk.title }}</a></li>{%endif%}
{% endfor %}
</ul>
</section>
{% endblock %}
