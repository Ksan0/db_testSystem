{% extends "base.html" %}

{% block page %}
{% load static %}
<!--records: {{ question.get_records }} <br/-->
<script type="text/javascript" src="/resources/javascripts/jscharts.js"></script>
<section class="section section-alt section-padded">
    <div class="container-fluid">
        <div class="section-header">
            <h3>{{ question.title }}</h3>
			<h4>{{ question.desqription_html|safe }}</h4>
        </div>
		<h3>Правильный ответ:</h3>
		<form id="question_form" method="post" action="" enctype="multipart/form-data">
			{% csrf_token %}
			<textarea rows="3" id="id_answer" style="width:400px; max-width:600px">{{ question.answer_html|safe }}</textarea><br>
		<button class="ajax-check-sql-admin btn btn-info">Проверить</button>
		<div class="sql-check-table-admin"></div>
		{% if not answers %}<h3>Тут жизни нет:(</h3>{% endif %}
		<h3>Результат</h3>
		<table class="question-table table table-bordered">
        	<thead>
	        	<tr>
					<th style="width:150px">Пользователь</th>
        	        <th>Запрос</th>
            	    <th>Результат</th>
	            </tr>
    	    </thead>
        	<tbody>
			{% for answer in answers %}
				<tr class="{% if answer.is_right %}success{% else %}error{% endif %}">
					<td>{{ answer.session.user }}</td>
					<td>{{ answer.last_answer_html|safe }}</td>
					<td class="answer">{{ answer.get_user_records }}</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
	</div>
</section>
{% endblock %}
